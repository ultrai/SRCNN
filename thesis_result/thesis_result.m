clear
GT = [];
for temp =1:18
    if temp~=9
        I = imread(['For synthetic experiments/',num2str(temp),'/average.tif']);
        GT = cat(3,GT,I);
    end
end
GT = double(GT);
load('SRCNN.mat')
SRCNN = double(permute(x,[2,3,1]))*255;
load('SRCNN_modified.mat')
SRCNN_modified = double(permute(x,[2,3,1]))*255;

PSNR_SRCNN = zeros(17,1);
MSE_SRCNN = zeros(17,1);
MAXERR_SRCNN = zeros(17,1);
L2RAT_SRCNN = zeros(17,1);
SSIM_SRCNN = zeros(17,1);

PSNR_SRCNN_modified = zeros(17,1);
MSE_SRCNN_modified = zeros(17,1);
MAXERR_SRCNN_modified = zeros(17,1);
L2RAT_SRCNN_modified= zeros(17,1);
SSIM_SRCNN_modified = zeros(17,1);
 
for temp =1:17
   [PSNR_SRCNN(temp),          MSE_SRCNN(temp),         MAXERR_SRCNN(temp),         L2RAT_SRCNN(temp)]= measerr(GT(:,:,temp),         SRCNN(:,:,temp));
    [PSNR_SRCNN_modified(temp),MSE_SRCNN_modified(temp),MAXERR_SRCNN_modified(temp),L2RAT_SRCNN_modified(temp)]= measerr(GT(:,:,temp),SRCNN_modified(:,:,temp));
    %[PSNR,MSE,MAXERR,L2RAT]= measerr(X,XAPP);
SSIM_SRCNN(temp) = ssim(SRCNN(:,:,temp)/255,GT(:,:,temp)/255);
SSIM_SRCNN_modified(temp) = ssim(SRCNN_modified(:,:,temp)/255,GT(:,:,temp)/255);

%ssimval = ssim;(A,ref)
    
end 
SRCNN_metric =    [PSNR_SRCNN          MSE_SRCNN          MAXERR_SRCNN          L2RAT_SRCNN          SSIM_SRCNN];
Modified_metric = [PSNR_SRCNN_modified MSE_SRCNN_modified MAXERR_SRCNN_modified L2RAT_SRCNN_modified SSIM_SRCNN_modified];  
aa =[ mean(SRCNN_metric);mean(Modified_metric)];
save('temp.mat')
%[28.2488804241834,115.589612383765,92.5246923373026,0.998790071249632,0.690200822124189;28.1582538043698,116.684191288544,90.0309920731713,0.998126461871722,0.683397035708879]
%[28.2496882395985,97.2997079936047,119.405627310276,0.981006296177792,0.685106252593322;31.6783262402928,44.1822406514742,50.4225715994835,1.03147702871986,0.716685321164132;24.4022543872832,235.968983739544,115.227108061314,1.23484175097440,0.683630454213798;29.9192550107226,66.2452677548188,59.4802824854851,1.02701221774882,0.697783379880033;28.3974103544982,94.0457827401556,105.779062300920,0.975492923020411,0.686118390342424;30.2120637150156,61.9261370192838,96.3680392503738,0.993414456515623,0.697699696627873;27.8335679491442,107.083748637775,60.9259135127068,0.960002663914789,0.687121384317443;29.3723263266527,75.1359407117516,72.5523685514927,0.930174612388777,0.698928473509835;30.6646294859709,55.7978432194253,70.4267767369747,1.02741119055636,0.731703670208672;26.8511176763206,134.266786025499,93.9193004369736,0.898018224770527,0.679740258587835;23.6867884056034,278.228439742732,115.633431017399,0.854132795760057,0.669526595241901;28.2031775512503,98.3473372122025,106.580992996693,1.05641180924498,0.683550949584178;30.2800991103686,60.9635782343128,68.7275443673134,0.969092324906693,0.709377267014042;29.6411070754741,70.6268201474749,63.7486356794834,0.962065504138939,0.707676972267494;25.9833388549023,163.963233869015,134.962972611189,0.990002099366008,0.642612829403036;23.8221717940104,269.688968041417,174.656924188137,1.06390131197367,0.644706748357069;31.0336450340093,51.2525947835100,64.1022186279297,1.02497400106604,0.711445332798126]