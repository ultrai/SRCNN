clear
GT = [];
for temp =1:18
    if temp~=9
        I = imread(['For synthetic experiments/',num2str(temp),'/average.tif']);
        GT = cat(3,GT,I);
    end
end
GT = double(GT);
load('SRCNN.mat')
SRCNN = double(permute(x,[2,3,1]))*255;
load('SRCNN_modified.mat')
SRCNN_modified = double(permute(x,[2,3,1]))*255;

PSNR_SRCNN = zeros(17,1);
MSE_SRCNN = zeros(17,1);
MAXERR_SRCNN = zeros(17,1);
L2RAT_SRCNN = zeros(17,1);
SSIM_SRCNN = zeros(17,1);

PSNR_SRCNN_modified = zeros(17,1);
MSE_SRCNN_modified = zeros(17,1);
MAXERR_SRCNN_modified = zeros(17,1);
L2RAT_SRCNN_modified= zeros(17,1);
SSIM_SRCNN_modified = zeros(17,1);
 
for temp =1:17
   [PSNR_SRCNN(temp),          MSE_SRCNN(temp),         MAXERR_SRCNN(temp),         L2RAT_SRCNN(temp)]= measerr(GT(:,:,temp),         SRCNN(:,:,temp));
    [PSNR_SRCNN_modified(temp),MSE_SRCNN_modified(temp),MAXERR_SRCNN_modified(temp),L2RAT_SRCNN_modified(temp)]= measerr(GT(:,:,temp),SRCNN_modified(:,:,temp));
    %[PSNR,MSE,MAXERR,L2RAT]= measerr(X,XAPP);
SSIM_SRCNN(temp) = ssim(SRCNN(:,:,temp)/255,GT(:,:,temp)/255);
SSIM_SRCNN_modified(temp) = ssim(SRCNN_modified(:,:,temp)/255,GT(:,:,temp)/255);
imwrite(SRCNN_modified(:,:,temp)/255,['Test_',num2str(temp),'_Proposed.png'],'png')
%ssimval = ssim;(A,ref)
    
end 
SRCNN_metric =    [PSNR_SRCNN          MSE_SRCNN          MAXERR_SRCNN          L2RAT_SRCNN          SSIM_SRCNN];
Modified_metric = [PSNR_SRCNN_modified MSE_SRCNN_modified MAXERR_SRCNN_modified L2RAT_SRCNN_modified SSIM_SRCNN_modified];  
aa =[ mean(SRCNN_metric);mean(Modified_metric)];
save('temp.mat')
%[28.2488804241834,115.589612383765,92.5246923373026,0.998790071249632,0.690200822124189;28.1582538043698,116.684191288544,90.0309920731713,0.998126461871722,0.683397035708879]
%[28.2496882395985,97.2997079936047,119.405627310276,0.981006296177792,0.685106252593322;31.6783262402928,44.1822406514742,50.4225715994835,1.03147702871986,0.716685321164132;24.4022543872832,235.968983739544,115.227108061314,1.23484175097440,0.683630454213798;29.9192550107226,66.2452677548188,59.4802824854851,1.02701221774882,0.697783379880033;28.3974103544982,94.0457827401556,105.779062300920,0.975492923020411,0.686118390342424;30.2120637150156,61.9261370192838,96.3680392503738,0.993414456515623,0.697699696627873;27.8335679491442,107.083748637775,60.9259135127068,0.960002663914789,0.687121384317443;29.3723263266527,75.1359407117516,72.5523685514927,0.930174612388777,0.698928473509835;30.6646294859709,55.7978432194253,70.4267767369747,1.02741119055636,0.731703670208672;26.8511176763206,134.266786025499,93.9193004369736,0.898018224770527,0.679740258587835;23.6867884056034,278.228439742732,115.633431017399,0.854132795760057,0.669526595241901;28.2031775512503,98.3473372122025,106.580992996693,1.05641180924498,0.683550949584178;30.2800991103686,60.9635782343128,68.7275443673134,0.969092324906693,0.709377267014042;29.6411070754741,70.6268201474749,63.7486356794834,0.962065504138939,0.707676972267494;25.9833388549023,163.963233869015,134.962972611189,0.990002099366008,0.642612829403036;23.8221717940104,269.688968041417,174.656924188137,1.06390131197367,0.644706748357069;31.0336450340093,51.2525947835100,64.1022186279297,1.02497400106604,0.711445332798126]
28.2488804241834	115.589612383765	92.5246923373026	0.998790071249632	0.690200822124189
28.1582538043698	116.684191288544	90.0309920731713	0.998126461871722	0.683397035708879

2.52252837080721	76.3693527690109	33.2237698753921	0.0818301820966178	0.0233839763442125
2.43461198440098	74.6037170509527	31.2543565116428	0.0815433715348742	0.0236378563366528

%L_Fang
27.6430768139583	128.429357833893	95.3233993333929	1.02044650166845	0.662800155736259
std 2.2401   76.7299   27.6511    0.0847    0.0250
[27.8581820226049	106.478557409523	120.476776123047	1.00084977223949	0.662419926837911
30.3286869345243	60.2853334490542	53.9030256271362	1.06012986541530	0.688542611092923
23.9068138802361	264.483737150663	111.478546142578	1.26257510433780	0.644419388104019
29.0379812384499	81.1488252264647	63.6255784034729	1.05121094690073	0.666122355231015
27.7965365050982	108.000734817463	104.597032546997	1.00278528611875	0.662672531005159
29.4866586844016	73.1837218710173	95.3383760452271	1.01666954712815	0.677428979078309
27.5614451358934	114.008136560893	71.3307595252991	0.975057138985978	0.646368662459902
28.6372993432758	88.9918892158671	73.4280638694763	0.951040167667223	0.665870069483613
29.8676834948405	67.0366049386655	89.2479662895203	1.03504397226308	0.714227271023516
26.4920243982169	145.840424933107	114.030787467957	0.907478962746460	0.650753678776891
23.5517809881935	287.013458569165	117.566544294357	0.872036832150322	0.646151925000116
27.5764355688339	113.615295924549	100.111916542053	1.07793847360035	0.654739897696597
29.4237431281901	74.2516396012862	82.3931756019592	0.993381080791519	0.681256255700160
29.2360949091989	77.5301938684986	73.7464332580566	0.984440039916111	0.683116276219529
25.6949738083985	175.219719204838	130.922390937805	1.01513914513993	0.618808364751918
23.6925251635875	277.861160037312	155.470769882202	1.08710151470536	0.617042212119101
29.7834406333473	68.3496503978226	62.8296461105347	1.05471267825706	0.687662242935733]

%SF


load('train.mat')
train = 10*log(255*255./x)/log(10);
load('test.mat')
test = 10*log(255*255./x)/log(10);
load('train_modified.mat')
train_modified = 10*log(255*255./x)/log(10);
load('test_modified.mat')
test_modified = 10*log(255*255./x)/log(10);
x = [1:1250];

plot(x,train,x,test,x,train_modified,x,test_modified)
xlabel('Epoch') % x-axis label
ylabel('PSNR') % y-axis label


legend('Train','Test','Train Modified','Test Modified') 
ax = gca; % current axes
ax.FontSize = 12;
ax.YLim = [23 32];
ax.XLim = [1 1250];
print('TrainVsTest','-dpng')
